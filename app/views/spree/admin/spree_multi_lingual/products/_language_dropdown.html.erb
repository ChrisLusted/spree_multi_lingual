<%= select("currently_modified_language", "lang", SpreeMultiLingual.languages.collect {|l| l}, {selected: I18n.locale}, {id: "spree_multi_lingual_dropdown"}) %>
<script>
  window.spree_multi_lingual = {};
  window.spree_multi_lingual.translated_fields = <%= raw Spree::Product.translated_attribute_names.map { |f| "product_" + f.to_s } %>;
  window.spree_multi_lingual.backend_locale = "<%= I18n.locale %>";
  window.spree_multi_lingual.translated_fields_values = [];
  <% Spree::Product.translated_attribute_names.each do |f| %>
    <% SpreeMultiLingual.languages.each do |lang| %>
      window.spree_multi_lingual.translated_fields_values['<%= "product_" + f.to_s + "_" + lang -%>'] = '<%= escape_javascript (eval("@product." + f.to_s + "_" + lang).gsub(/\r\n?/,"")) if !eval("@product." + f.to_s + "_" + lang).nil? -%>';
    <% end %>
  <% end %>
</script>